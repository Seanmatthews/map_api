package map_api.proto;

message RaftRevision {
  optional uint64 index = 1;
  optional uint64 entry = 2;
  optional uint64 term = 3;
}

message AppendEntriesRequest {
  optional uint64 term = 1;
  optional uint64 last_log_index = 2;
  optional uint64 last_log_term = 3;
  optional uint64 commit_index = 4;
  optional uint64 previous_log_index = 5;
  optional uint64 previous_log_term = 6;
  optional RaftRevision revision = 7;
}

enum AppendResponseStatus {
  FAILED = 0;
  REJECTED = 1;
  ALREADY_PRESENT = 2;
  SUCCESS = 3;
}

message AppendEntriesResponse {
  optional uint64 term = 1;
  optional uint64 last_log_index = 2;
  optional uint64 last_log_term = 3;
  optional uint64 commit_index = 4;
  optional AppendResponseStatus response = 5;
}

message VoteRequest {
  optional uint64 term = 1;
  optional uint64 last_log_index = 2;
  optional uint64 last_log_term = 3;
  optional uint64 commit_index = 4;
}

message VoteResponse {
  optional bool vote = 1;
  optional uint64 previous_log_index = 2;
  optional uint64 previous_log_term = 3;
}