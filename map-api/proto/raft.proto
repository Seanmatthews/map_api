package map_api.proto;

message RaftHeartbeat {
  required uint64 term = 1;
}

message AppendEntriesRequest {
  required uint64 term = 1;
  required uint64 lastLogIndex = 2;
  required uint64 lastLogTerm = 3;
  required uint64 commitIndex = 4;
  optional uint64 previousLogIndex = 5;
  optional uint64 previousLogTerm = 6;
  optional uint32 newEntry = 7;
  optional uint64 newEntryTerm = 8;
}

enum Response {
  FAILED = 0;
  REJECTED = 1;
  SUCCESS = 2;
}

message AppendEntriesResponse {
  required uint64 term = 1;
  required uint64 lastLogIndex = 2;
  required uint64 lastLogTerm = 3;
  required uint64 commitIndex = 4;
  required Response response = 5;
}

message RequestVote {
  required uint64 term = 1;
  required uint64 lastLogIndex = 2;
  required uint64 lastLogTerm = 3;
  required uint64 commitIndex = 4;
}

message ResponseVote {
  required bool vote = 1;
  optional uint64 previousLogIndex = 2;
  optional uint64 previousLogTerm = 3;
}